{% extends 'layouts/console_base.html' %}
{% load static i18n %}

{% block content %}
    <div class="content-body col-md-10 col-md-offset-1">

        {% if object_list %}
            <div class="row connections">
                <form class="form" method="post" action="">
                    <div class="title">
                        <span>{% trans 'Selección de Conexión' %}</span>
                    </div>
                    <div class="list">
                        {% for connection in object_list %}
                            {#                        extends #}
                            <div class="row">
                                <div class="col-md-5 item extended">
                                    <div class="image-wrapper">
                                        <div class="button"></div>
{#                                        <input type="radio">#}
                                        <div class="name">
                                            {{ connection.name }}
                                        </div>
                                        {#                                    <div class="control">#}
                                        {#                                        <div class="history">#}
                                        {#                                            <a href="{% url 'gear:send_history' pk=gear.id %}">#}
                                        {#                                                <img src="{% static 'img/console/g8645.png' %}" width="36">#}
                                        {#                                            </a>#}
                                        {#                                        </div>#}
                                        {#                                        <div class="edit">#}
                                        {#                                            <a href="{% url 'gear:update' pk=gear.id %}">#}
                                        {#                                                <img src="{% static 'img/console/g3125.png' %}" width="34">#}
                                        {#                                            </a>#}
                                        {#                                        </div>#}
                                        {#                                        <a class="toggle-gear-btn" href="{% url 'gear:toggle' gear_id=gear.id %}">#}
                                        {#                                            <div class="button">#}
                                        {#                                                <img src="{% static gear.is_running|yesno:'img/console/g3317.png,img/console/g3333.png' %}"#}
                                        {#                                                     width="36" height="36">#}
                                        {#                                                <div class="status">{{ gear.is_running|yesno:"ON,OFF" }}</div>#}
                                        {#                                            </div>#}
                                        {#                                        </a>#}
                                        {#                                    </div>#}
                                    </div>
                                </div>
                                <div class="col-md-3 test-button">
                                    <div class="button">
                                        <img src="{% static 'img/console/g3333.png' %}" width="36" height="36">
                                    </div>
                                    <div class="text-line"></div>
                                    <div class="text">
                                        Ésta conexión <b>funciona</b>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <button class="button-create" type="submit">{% trans 'Usar Conexión' %}</button>
                            <button class="button-create" type="submit">{% trans 'Crear Conexión' %}</button>
                        </div>
                    </div>
                </form>
            </div>
        {% endif %}

    </div>
{% endblock %}
{##}
{#{% block content %}#}
{#    <form method="post" action="">#}
{#        {% csrf_token %}#}
{#        <ul class="list-connector">#}
{#            {% for connection in object_list %}#}
{#                <li style="display: block;">#}
{#                    <label>#}
{#                        <input type="radio" name="connection" value="{{ connection.id }}"> {{ connection.name }}#}
{#                    </label>#}
{#                    <button type="button" class="testConnectionButton" connection_id="{{ connection.id }}">TEST#}
{#                    </button>#}
{#                    <br>#}
{#                </li>#}
{#            {% empty %}#}
{#                There are no connections.#}
{#                <a href="{% url 'connection:create' connector_id=connector_id %}" style="color:blue;">#}
{#                    New Connection</a>#}
{#            {% endfor %}#}
{#        </ul>#}
{#        <button>Use this connection</button>#}
{#        <br/>#}
{##}
{#        <a href="{% url 'connection:create' connector_id=connector_id %}" style="color:blue;">New Connection</a>#}
{#    </form>#}
{#{% endblock %}#}
{##}
{##}
{#{% block scripts %}#}
{#    {{ block.super }}#}
{#    <script type="application/javascript">#}
{#        function popUp(url) {#}
{#            var win = window.open(url, 'New Connection', 'width=972,height=660,modal=yes,alwaysRaised=yes');#}
{#            var checkConnect = setInterval(function () {#}
{#                if (!win || !win.closed) return;#}
{#                clearInterval(checkConnect);#}
{#                window.location.reload();#}
{#            }, 100);#}
{#        }#}
{##}
{#        $('.testConnectionButton').click(function (e) {#}
{#            var button = $(this);#}
{#            $.ajax({#}
{#                method: "POST",#}
{#                url: "{% url 'connection:test' connector_id=connector_id %}",#}
{#                data: {connection_id: $(button).attr('connection_id')},#}
{#            }).done(function (response) {#}
{#                if (response.test == true)#}
{#                    $(button).css('background-color', 'green');#}
{#                else#}
{#                    $(button).css('background-color', 'red');#}
{##}
{#            });#}
{#            return false;#}
{#        })#}
{#    </script>#}
{#{% endblock %}#}